const fs = require('fs')
const whitelist = require('./packages/shared/src/helper/abis/whitelist.json')

console.log('starting whitelist ')

console.log('initial list length: ', whitelist.length)
const deduplicates = [...new Set(whitelist)]
console.log('dedup list length: ', deduplicates.length)

for (let i = 0; i < deduplicates.length; i++) {
  if (deduplicates[i].length != 42) {
    console.log('invalid length: ', deduplicates[i])
    deduplicates[i] = 'delete'
  } else {
    deduplicates[i] = deduplicates[i]?.toLowerCase()
  }
}

console.log('initial list length: ', deduplicates.length)
const deduplicates2 = [...new Set(deduplicates)]
console.log('dedup list length: ', deduplicates2.length)

fs.writeFile('./whitelist-2.json', JSON.stringify(deduplicates2, null, 2), 'utf8', function (err) {
  if (err) {
    return console.log(err)
  }

  console.log('saved')
})